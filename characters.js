// 픽셀 캐릭터 데이터
const pixelData = {
    jiyul: {
        idle: [
            [0,0,0,7,7,7,7,7,7,7,7,0,0,0,0,0],
            [0,0,7,7,7,7,7,7,7,7,7,7,0,0,0,0],
            [0,0,2,2,2,2,2,2,2,2,2,2,0,0,0,0],
            [0,2,2,2,2,2,2,2,2,2,2,2,2,0,0,0],
            [0,2,1,1,1,1,1,1,1,1,1,1,2,0,0,0],
            [0,2,1,5,4,1,1,1,1,5,4,1,2,0,0,0],
            [0,2,1,5,5,1,1,1,1,5,5,1,2,0,0,0],
            [0,2,1,1,1,1,1,1,1,1,1,1,2,0,0,0],
            [0,0,1,1,1,1,6,6,1,1,1,1,0,0,0,0],
            [0,0,0,3,3,3,3,3,3,3,3,0,0,0,0,0],
            [0,0,3,3,3,3,3,3,3,3,3,3,0,0,0,0],
            [0,3,3,3,3,3,3,3,3,3,3,3,3,0,0,0],
            [0,3,3,3,3,3,3,3,3,3,3,3,3,0,0,0],
            [0,0,3,3,3,0,0,0,0,3,3,3,0,0,0,0],
            [0,0,1,1,1,0,0,0,0,1,1,1,0,0,0,0],
            [0,0,4,4,4,0,0,0,0,4,4,4,0,0,0,0]
        ],
        jump: [
            [0,0,0,7,7,7,7,7,7,7,7,0,0,0,0,0],
            [0,0,7,7,7,7,7,7,7,7,7,7,0,0,0,0],
            [0,0,2,2,2,2,2,2,2,2,2,2,0,0,0,0],
            [0,2,2,2,2,2,2,2,2,2,2,2,2,0,0,0],
            [0,2,1,1,1,1,1,1,1,1,1,1,2,0,0,0],
            [0,2,1,5,4,1,1,1,1,5,4,1,2,0,0,0],
            [0,2,1,5,5,1,1,1,1,5,5,1,2,0,0,0],
            [0,2,1,1,1,1,1,1,1,1,1,1,2,0,0,0],
            [0,1,1,1,1,1,6,6,1,1,1,1,1,0,0,0],
            [3,3,0,3,3,3,3,3,3,3,3,0,3,3,0,0],
            [0,0,3,3,3,3,3,3,3,3,3,3,0,0,0,0],
            [0,3,3,3,3,3,3,3,3,3,3,3,3,0,0,0],
            [0,3,3,3,3,3,3,3,3,3,3,3,3,0,0,0],
            [0,0,1,1,0,0,0,0,0,0,1,1,0,0,0,0],
            [0,0,1,1,0,0,0,0,0,0,1,1,0,0,0,0],
            [0,4,4,4,0,0,0,0,0,0,4,4,4,0,0,0]
        ],
        colorMap: {
            0: null,
            1: "#FFE0BD",
            2: "#8B4513",
            3: "#FF69B4",
            4: "#FFFFFF",
            5: "#4169E1",
            6: "#FF1493",
            7: "#FFD700"
        }
    },
    slime: {
        idle: [
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0],
            [0,0,0,1,1,2,2,2,2,2,2,1,1,0,0,0],
            [0,0,1,2,2,2,2,2,2,2,2,2,2,1,0,0],
            [0,1,2,2,2,2,2,2,2,2,2,2,2,2,1,0],
            [0,1,2,2,4,4,2,2,2,2,4,4,2,2,1,0],
            [1,2,2,2,4,4,2,2,2,2,4,4,2,2,2,1],
            [1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],
            [1,2,2,2,2,2,2,5,5,2,2,2,2,2,2,1],
            [1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],
            [1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],
            [1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1],
            [0,1,2,2,2,2,2,2,2,2,2,2,2,2,1,0],
            [0,0,1,2,2,2,2,2,2,2,2,2,2,1,0,0],
            [0,0,0,1,1,2,2,2,2,2,2,1,1,0,0,0],
            [0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0]
        ],
        colorMap: {
            0: null,
            1: "#90EE90",
            2: "#32CD32",
            3: "#228B22",
            4: "#000000",
            5: "#FF69B4"
        }
    },
    goblin: {
        idle: [
            [0,0,0,0,5,5,5,5,5,5,5,0,0,0,0,0],
            [0,0,0,5,5,5,5,5,5,5,5,5,0,0,0,0],
            [0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0],
            [0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,0],
            [0,0,1,1,4,4,1,1,1,4,4,1,1,0,0,0],
            [0,0,1,1,4,4,1,1,1,4,4,1,1,0,0,0],
            [0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,0],
            [0,0,2,1,1,1,1,1,1,1,1,1,2,0,0,0],
            [0,0,0,1,1,1,4,4,4,1,1,1,0,0,0,0],
            [0,0,3,3,3,3,3,3,3,3,3,3,3,0,0,0],
            [0,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0],
            [0,3,3,3,3,3,6,6,6,3,3,3,3,3,0,0],
            [0,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0],
            [0,0,3,3,3,0,0,0,0,0,3,3,3,0,0,0],
            [0,0,2,2,2,0,0,0,0,0,2,2,2,0,0,0],
            [0,0,4,4,4,0,0,0,0,0,4,4,4,0,0,0]
        ],
        colorMap: {
            0: null,
            1: "#90EE90",
            2: "#228B22",
            3: "#8B4513",
            4: "#000000",
            5: "#FF0000",
            6: "#FFD700"
        }
    },
    boss: {
        idle: [
            [0,0,0,4,4,4,4,4,4,4,4,4,0,0,0,0],
            [0,0,4,4,4,4,4,4,4,4,4,4,4,0,0,0],
            [0,0,2,2,2,2,2,2,2,2,2,2,2,0,0,0],
            [0,2,1,1,1,1,1,1,1,1,1,1,1,2,0,0],
            [0,2,1,5,5,1,1,1,1,5,5,1,1,2,0,0],
            [0,2,1,5,6,1,1,1,1,5,6,1,1,2,0,0],
            [0,2,1,1,1,1,1,1,1,1,1,1,1,2,0,0],
            [0,3,1,1,1,1,6,6,6,1,1,1,1,3,0,0],
            [0,3,3,1,1,1,1,1,1,1,1,1,3,3,0,0],
            [0,7,3,3,3,3,3,3,3,3,3,3,3,7,0,0],
            [7,7,7,3,3,3,3,3,3,3,3,3,7,7,7,0],
            [7,7,7,7,3,3,3,3,3,3,3,7,7,7,7,0],
            [0,7,7,7,7,3,3,3,3,3,7,7,7,7,0,0],
            [0,0,7,7,0,0,0,0,0,0,0,7,7,0,0,0],
            [0,0,2,2,0,0,0,0,0,0,0,2,2,0,0,0],
            [0,0,6,6,0,0,0,0,0,0,0,6,6,0,0,0]
        ],
        colorMap: {
            0: null,
            1: "#4B0082",
            2: "#8B008B",
            3: "#9400D3",
            4: "#FFD700",
            5: "#FF0000",
            6: "#000000",
            7: "#C0C0C0"
        }
    },
    // 16x16 도트 장애물들
    rock: {
        sprite: [
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0],
            [0,0,0,1,1,2,2,2,2,2,1,1,0,0,0,0],
            [0,0,1,2,2,3,3,3,3,2,2,2,1,0,0,0],
            [0,1,2,2,3,3,3,3,3,3,2,2,2,1,0,0],
            [0,1,2,3,3,3,3,3,3,3,3,2,2,1,0,0],
            [1,2,2,3,3,3,3,3,3,3,3,2,2,2,1,0],
            [1,2,2,2,3,3,3,3,3,3,2,2,2,2,1,0],
            [1,2,2,2,2,3,3,3,3,2,2,2,2,2,1,0],
            [1,2,2,2,2,2,2,2,2,2,2,2,2,2,1,0],
            [1,2,2,2,2,2,2,2,2,2,2,2,2,2,1,0],
            [0,1,2,2,2,2,2,2,2,2,2,2,2,1,0,0],
            [0,0,1,1,2,2,2,2,2,2,2,1,1,0,0,0],
            [0,0,0,0,1,1,1,1,1,1,1,0,0,0,0,0],
            [7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7],
            [7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7]
        ],
        colorMap: {
            0: null,
            1: "#808080",
            2: "#696969",
            3: "#A9A9A9",
            7: "#228B22"
        }
    },
    spike: {
        sprite: [
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],
            [0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0],
            [0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0],
            [0,0,0,1,0,1,2,1,2,1,0,1,0,0,0,0],
            [0,0,1,1,1,2,2,2,2,2,1,1,1,0,0,0],
            [0,1,2,2,2,2,2,2,2,2,2,2,2,1,0,0],
            [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0]
        ],
        colorMap: {
            0: null,
            1: "#C0C0C0",
            2: "#808080"
        }
    },
    pipe: {
        sprite: [
            [0,0,2,2,2,2,2,2,2,2,2,2,2,2,0,0],
            [0,2,1,1,1,1,1,1,1,1,1,1,1,1,2,0],
            [2,1,1,3,3,1,1,1,1,1,1,3,3,1,1,2],
            [2,1,3,1,1,1,1,1,1,1,1,1,1,3,1,2],
            [2,1,3,1,1,1,1,1,1,1,1,1,1,3,1,2],
            [2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2],
            [2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2],
            [2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2],
            [2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2],
            [2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2],
            [2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2],
            [2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2],
            [2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2],
            [2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2],
            [2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2],
            [7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7]
        ],
        colorMap: {
            0: null,
            1: "#32CD32",
            2: "#228B22",
            3: "#90EE90",
            7: "#228B22"
        }
    }
};

// 픽셀 스프라이트 그리기 함수
function drawPixelSprite(sprite, colorMap, x, y, scale = PIXEL_SCALE) {
    for (let row = 0; row < sprite.length; row++) {
        for (let col = 0; col < sprite[row].length; col++) {
            const pixel = sprite[row][col];
            if (pixel !== 0 && colorMap[pixel]) {
                ctx.fillStyle = colorMap[pixel];
                ctx.fillRect(x + col * scale, y + row * scale, scale, scale);
            }
        }
    }
}